<?xml version="1.0" encoding="utf-8"?>
<odoo>


	    <!-- Expandable payment icon list -->
    <template id="icon_list" name="Payment Icon List">
        <ul class="payment_icon_list float-right list-inline" data-max-icons="3">
            <t t-set="icon_index" t-value="0"/>
            <t t-set="MAX_ICONS" t-value="3"/>
            <!-- === Icons === -->
            <!-- Only shown if in the first 3 icons -->
            <t t-foreach="payment_icon_ids" t-as="icon">
                <li t-attf-class="list-inline-item{{'' if (icon_index &lt; MAX_ICONS) else ' d-none'}}">
                    <span t-esc="icon.image_payment_form"
                          t-options="{'widget': 'image', 'alt-field': 'name'}"
                          data-toggle="tooltip"
                          t-att-title="icon.name"/>
                </li>
                <t t-set="icon_index" t-value="icon_index + 1"/>
            </t>
            <t t-if="icon_index >= MAX_ICONS">
                <!-- === "show more" button === -->
                <!-- Only displayed if too many payment icons -->
                <li style="display:block;" class="list-inline-item">
                    <span class="float-right more_option text-info">
                        <a name="o_payment_icon_more"
                           data-toggle="tooltip"
                           t-att-title="', '.join([icon.name for icon in payment_icon_ids[MAX_ICONS:]])">
                            show more
                        </a>
                    </span>
                </li>
                <!-- === "show less" button === -->
                <!-- Only displayed when "show more" is clicked -->
                <li style="display:block;" class="list-inline-item d-none">
                    <span class="float-right more_option text-info">
                        <a name="o_payment_icon_less">show less</a>
                    </span>
                </li>
            </t>
        </ul>
    </template>

    <!-- Include sale-related values in payment checkout form to pass them to the client -->
    <template id="payment_checkout_inherit" inherit_id="payment.checkout">
        <xpath expr="//form[@name='o_payment_checkout']/div[hasclass('card')]/t[1]" position="attributes">
            <attribute name="t-if">acquirer.provider != 'paynamics'</attribute>
        </xpath>
        
        
        <xpath expr="//form[@name='o_payment_checkout']/div[hasclass('card')]" position="inside">
        
                        <!-- === Acquirers === -->
                <t t-foreach="acquirers.filtered(lambda rec:rec.provider == 'paynamics')" t-as="acquirer">
                
                <t t-set="payment_icon_ids" t-value="[]"/>
                
                <!-- ===Paynamics All Channel === -->
                	<t t-if="acquirer.paynamics_allchannel"> 
                	<t t-set="payment_icon_ids" t-value="acquirer.payment_icon_ids.filtered(lambda r: r.image_payment_form and r.paynamics_allchannel)"/>
                	
	                    <div name="o_payment_option_card" class="card-body o_payment_option_card">
	                        <label>
	                            <!-- === Radio button === -->
	                            <!-- Only shown if linked to the only payment option -->
	                            <input name="o_payment_radio"
	                                   type="radio"
	                                   t-att-checked="acquirer.id == default_payment_option_id"
	                                   t-att-class="'' if acquirer_count + token_count > 1 else 'd-none'"
	                                   t-att-data-payment-option-id="acquirer.id"
	                                   data-provider="paynamics_allchannel"
	                                   data-payment-option-type="acquirer"/>
	                            <!-- === Acquirer name === -->
	                            <span class="payment_option_name">
	                                <b><t t-esc="acquirer.display_as or acquirer.name"/> All Payment Channels</b>
	                            </span>
	                            <!-- === "Test Mode" badge === -->
	                            <span t-if="acquirer.state == 'test'"
	                                  class="badge-pill badge-warning"
	                                  style="margin-left:5px">
	                                Test Mode
	                            </span>
	                        </label>
	                        <!-- === Payment icon list === -->
	                        <t t-call="payment_paynamics.icon_list"/>
	                        <!-- === Help message === -->
	                        <div t-if="not is_html_empty(acquirer.pre_msg)"
	                             t-out="acquirer.pre_msg"
	                             class="text-muted ml-3"/>
	                    </div>
	                    <!-- === Acquirer inline form === -->
	                    <t t-if="acquirer.sudo()._should_build_inline_form(is_validation=True)">
	                        <div t-attf-id="o_payment_acquirer_inline_form_{{acquirer.id}}"
	                             name="o_payment_inline_form"
	                             class="card-footer d-none">
	                            <!-- === Inline form content (filled by acquirer) === -->
	                            <t t-set="inline_form_xml_id"
	                               t-value="acquirer.sudo().inline_form_view_id.xml_id"/>
	                            <div t-if="inline_form_xml_id" class="clearfix">
	                                <t t-call="{{inline_form_xml_id}}">
	                                    <t t-set="acquirer_id" t-value="acquirer.id"/>
	                                </t>
	                            </div>
	                        </div>
	                    </t>
                    
                    </t>
                
                	<!-- ===Cash only === -->
                	<t t-if="acquirer.paynamics_cash"> 
                		<t t-set="payment_icon_ids" t-value="acquirer.payment_icon_ids.filtered(lambda r: r.image_payment_form and r.paynamics_cash)"/>
                	
	                    <div name="o_payment_option_card" class="card-body o_payment_option_card">
	                        <label>
	                            <!-- === Radio button === -->
	                            <!-- Only shown if linked to the only payment option -->
	                            <input name="o_payment_radio"
	                                   type="radio"
	                                   t-att-checked="acquirer.id == default_payment_option_id"
	                                   t-att-class="'' if acquirer_count + token_count > 1 else 'd-none'"
	                                   t-att-data-payment-option-id="acquirer.id"
	                                   data-provider="paynamics_cash"
	                                   data-payment-option-type="acquirer"/>
	                            <!-- === Acquirer name === -->
	                            <span class="payment_option_name">
	                                <b><t t-esc="acquirer.display_as or acquirer.name"/> Wallet</b>
	                            </span>
	                            <!-- === "Test Mode" badge === -->
	                            <span t-if="acquirer.state == 'test'"
	                                  class="badge-pill badge-warning"
	                                  style="margin-left:5px">
	                                Test Mode
	                            </span>
	                        </label>
	                        <!-- === Payment icon list === -->
	                        <t t-call="payment_paynamics.icon_list"/>
	                        <!-- === Help message === -->
	                        <div t-if="not is_html_empty(acquirer.pre_msg)"
	                             t-out="acquirer.pre_msg"
	                             class="text-muted ml-3"/>
	                    </div>
	                    <!-- === Acquirer inline form === -->
	                    <t t-if="acquirer.sudo()._should_build_inline_form(is_validation=True)">
	                        <div t-attf-id="o_payment_acquirer_inline_form_{{acquirer.id}}"
	                             name="o_payment_inline_form"
	                             class="card-footer d-none">
	                            <!-- === Inline form content (filled by acquirer) === -->
	                            <t t-set="inline_form_xml_id"
	                               t-value="acquirer.sudo().inline_form_view_id.xml_id"/>
	                            <div t-if="inline_form_xml_id" class="clearfix">
	                                <t t-call="{{inline_form_xml_id}}">
	                                    <t t-set="acquirer_id" t-value="acquirer.id"/>
	                                </t>
	                            </div>
	                        </div>
	                    </t>
                    
                    </t>
                    
                    
                    <!-- ===Credit cards only === -->
                	<t t-if="acquirer.paynamics_creditcard"> 
                		<t t-set="payment_icon_ids" t-value="acquirer.payment_icon_ids.filtered(lambda r: r.image_payment_form and r.paynamics_creditcard)"/>
                		
	                    <div name="o_payment_option_card" class="card-body o_payment_option_card">
	                        <label>
	                            <!-- === Radio button === -->
	                            <!-- Only shown if linked to the only payment option -->
	                            <input name="o_payment_radio"
	                                   type="radio"
	                                   t-att-checked="acquirer.id == default_payment_option_id"
	                                   t-att-class="'' if acquirer_count + token_count > 1 else 'd-none'"
	                                   t-att-data-payment-option-id="acquirer.id"
	                                   data-provider="paynamics_creditcard"
	                                   data-payment-option-type="acquirer"/>
	                            <!-- === Acquirer name === -->
	                            <span class="payment_option_name">
	                                <b><t t-esc="acquirer.display_as or acquirer.name"/> Credit Cards</b>
	                            </span>
	                            <!-- === "Test Mode" badge === -->
	                            <span t-if="acquirer.state == 'test'"
	                                  class="badge-pill badge-warning"
	                                  style="margin-left:5px">
	                                Test Mode
	                            </span>
	                        </label>
	                        <!-- === Payment icon list === -->
	                        <t t-call="payment_paynamics.icon_list"/>
	                        <!-- === Help message === -->
	                        <div t-if="not is_html_empty(acquirer.pre_msg)"
	                             t-out="acquirer.pre_msg"
	                             class="text-muted ml-3"/>
	                    </div>
	                    <!-- === Acquirer inline form === -->
	                    <t t-if="acquirer.sudo()._should_build_inline_form(is_validation=True)">
	                        <div t-attf-id="o_payment_acquirer_inline_form_{{acquirer.id}}"
	                             name="o_payment_inline_form"
	                             class="card-footer d-none">
	                            <!-- === Inline form content (filled by acquirer) === -->
	                            <t t-set="inline_form_xml_id"
	                               t-value="acquirer.sudo().inline_form_view_id.xml_id"/>
	                            <div t-if="inline_form_xml_id" class="clearfix">
	                                <t t-call="{{inline_form_xml_id}}">
	                                    <t t-set="acquirer_id" t-value="acquirer.id"/>
	                                </t>
	                            </div>
	                        </div>
	                    </t>
                    
                    </t>
                    
                    
                    
                    <!-- ===Online Transfer only === -->
                	<t t-if="acquirer.paynamics_online"> 
                		<t t-set="payment_icon_ids" t-value="acquirer.payment_icon_ids.filtered(lambda r: r.image_payment_form and r.paynamics_online)"/>
	                    <div name="o_payment_option_card" class="card-body o_payment_option_card">
	                        <label>
	                            <!-- === Radio button === -->
	                            <!-- Only shown if linked to the only payment option -->
	                            <input name="o_payment_radio"
	                                   type="radio"
	                                   t-att-checked="acquirer.id == default_payment_option_id"
	                                   t-att-class="'' if acquirer_count + token_count > 1 else 'd-none'"
	                                   t-att-data-payment-option-id="acquirer.id"
	                                   data-provider="paynamics_online"
	                                   data-payment-option-type="acquirer"/>
	                            <!-- === Acquirer name === -->
	                            <span class="payment_option_name">
	                                <b><t t-esc="acquirer.display_as or acquirer.name"/> Online Transfer</b>
	                            </span>
	                            <!-- === "Test Mode" badge === -->
	                            <span t-if="acquirer.state == 'test'"
	                                  class="badge-pill badge-warning"
	                                  style="margin-left:5px">
	                                Test Mode
	                            </span>
	                        </label>
	                        <!-- === Payment icon list === -->
	                        <t t-call="payment_paynamics.icon_list"/>
	                        <!-- === Help message === -->
	                        <div t-if="not is_html_empty(acquirer.pre_msg)"
	                             t-out="acquirer.pre_msg"
	                             class="text-muted ml-3"/>
	                    </div>
	                    <!-- === Acquirer inline form === -->
	                    <t t-if="acquirer.sudo()._should_build_inline_form(is_validation=True)">
	                        <div t-attf-id="o_payment_acquirer_inline_form_{{acquirer.id}}"
	                             name="o_payment_inline_form"
	                             class="card-footer d-none">
	                            <!-- === Inline form content (filled by acquirer) === -->
	                            <t t-set="inline_form_xml_id"
	                               t-value="acquirer.sudo().inline_form_view_id.xml_id"/>
	                            <div t-if="inline_form_xml_id" class="clearfix">
	                                <t t-call="{{inline_form_xml_id}}">
	                                    <t t-set="acquirer_id" t-value="acquirer.id"/>
	                                </t>
	                            </div>
	                        </div>
	                    </t>
                    
                    </t>
            </t>
        
        </xpath>
        
        
    </template>

</odoo>
